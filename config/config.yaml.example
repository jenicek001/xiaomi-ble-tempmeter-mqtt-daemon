# Example configuration for Xiaomi Mijia Bluetooth Daemon
# Copy this file to config.yaml and modify as needed

# Bluetooth configuration
bluetooth:
  adapter: ${BLUETOOTH_ADAPTER:-0}              # Bluetooth adapter number
  scan_interval: ${BLUETOOTH_SCAN_INTERVAL:-300} # Device scan interval in seconds
  connection_timeout: ${BLUETOOTH_CONNECTION_TIMEOUT:-10} # Connection timeout in seconds
  retry_attempts: ${BLUETOOTH_RETRY_ATTEMPTS:-3} # Number of retry attempts

# MQTT broker configuration  
mqtt:
  broker: ${MQTT_BROKER:-"localhost"}           # MQTT broker hostname/IP
  port: ${MQTT_PORT:-1883}                     # MQTT broker port
  username: ${MQTT_USERNAME:-""}               # MQTT username (optional)
  password: ${MQTT_PASSWORD:-""}               # MQTT password (optional)
  client_id: ${MQTT_CLIENT_ID:-"mijia-daemon"} # MQTT client ID
  
  # Topic configuration
  base_topic: ${MQTT_BASE_TOPIC:-"mijiableht"}  # Base topic for sensor data
  discovery_prefix: ${MQTT_DISCOVERY_PREFIX:-"homeassistant"} # HA discovery prefix
  
  # Message settings
  retain: ${MQTT_RETAIN:-true}                 # Retain messages
  qos: ${MQTT_QOS:-1}                         # Quality of Service level

# Device configuration
devices:
  auto_discovery: ${DEVICES_AUTO_DISCOVERY:-true} # Enable automatic device discovery
  poll_interval: ${DEVICES_POLL_INTERVAL:-300}    # Default polling interval in seconds
  
  # Static device configuration (optional)
  static_devices:
    - mac: "A4:C1:38:AA:AA:AA"                # Device MAC address
      name: "Living Room"                     # Friendly name
      mode: "LYWSD03MMC"                      # Device mode
      poll_interval: 180                      # Custom polling interval
      enabled: true                           # Enable/disable device
    - mac: "A4:C1:38:BB:BB:BB"
      name: "Bedroom"
      mode: "LYWSD03MMC"
      poll_interval: 300
      enabled: true

# Logging configuration
logging:
  level: ${LOG_LEVEL:-"INFO"}                 # Log level (DEBUG, INFO, WARNING, ERROR)
  format: ${LOG_FORMAT:-"%(asctime)s - %(name)s - %(levelname)s - %(message)s"}
  file: ${LOG_FILE:-""}                       # Log file path (empty for stdout only)

# Optional monitoring features
monitoring:
  enabled: ${MONITORING_ENABLED:-false}       # Enable Prometheus metrics
  port: ${MONITORING_PORT:-8080}              # Metrics server port
  
web_dashboard:
  enabled: ${WEB_DASHBOARD_ENABLED:-false}    # Enable web dashboard
  port: ${WEB_DASHBOARD_PORT:-8081}           # Dashboard server port
  
health_check:
  enabled: ${HEALTH_CHECK_ENABLED:-true}      # Enable health check endpoint
  port: ${HEALTH_CHECK_PORT:-8082}            # Health check server port